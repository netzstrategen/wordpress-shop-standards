/* global jQuery, _ */
(function pageLoad($) {
  /**
   * Checks GTIN for uniqueness and issues an error/success message.
   */
  $(document).on('keyup', "input[name*='_shop-standards_gtin']", _.debounce(function (event) {
    var $gtinInput = $(event.currentTarget);
    var $gtinField = $gtinInput.parents('.form-field');
    $gtinField.find('.notice').remove();

    if ($gtinField.find('.spinner').length === 0) {
      $gtinField.append('<span class="spinner"></span>');
    }

    $gtinField.find('.spinner').addClass('is-active');
    jQuery.post(window.ajaxurl, {
      action: 'is_existing_gtin',
      product_id: window.shop_standards_admin.product_id,
      gtin: $gtinInput.val()
    }, function (response) {
      $gtinField.find('.spinner').removeClass('is-active');
      $gtinField.find('.notice').remove();

      if (response.is_unique) {
        var message = window.shop_standards_admin.gtin_success_message;
        $gtinField.append("\n            <div class=\"notice notice-success\">\n              ".concat(message, "\n            </div>\n          "));
      } else {
        var _message = window.shop_standards_admin.gtin_error_message.replace('{{url}}', response.duplicate_edit_link);

        $gtinField.append("\n            <div class=\"notice notice-error\">\n              ".concat(_message, "\n            </div>\n          "));
      }
    }, 'json');
  }, 500));
  /**
   * Disable scroll on number input field to prevent accidental value changes.
   */

  $(document).on('wheel', 'input[name="acf[field_recommended_own_brand_product]"]', function (event) {
    event.preventDefault();
    $(event.currentTarget).blur();
  });
})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIl0sIm5hbWVzIjpbInBhZ2VMb2FkIiwiJCIsImRvY3VtZW50Iiwib24iLCJfIiwiZGVib3VuY2UiLCJldmVudCIsIiRndGluSW5wdXQiLCJjdXJyZW50VGFyZ2V0IiwiJGd0aW5GaWVsZCIsInBhcmVudHMiLCJmaW5kIiwicmVtb3ZlIiwibGVuZ3RoIiwiYXBwZW5kIiwiYWRkQ2xhc3MiLCJqUXVlcnkiLCJwb3N0Iiwid2luZG93IiwiYWpheHVybCIsImFjdGlvbiIsInByb2R1Y3RfaWQiLCJzaG9wX3N0YW5kYXJkc19hZG1pbiIsImd0aW4iLCJ2YWwiLCJyZXNwb25zZSIsInJlbW92ZUNsYXNzIiwiaXNfdW5pcXVlIiwibWVzc2FnZSIsImd0aW5fc3VjY2Vzc19tZXNzYWdlIiwiZ3Rpbl9lcnJvcl9tZXNzYWdlIiwicmVwbGFjZSIsImR1cGxpY2F0ZV9lZGl0X2xpbmsiLCJwcmV2ZW50RGVmYXVsdCIsImJsdXIiXSwibWFwcGluZ3MiOiJBQUFBO0FBRUMsVUFBU0EsUUFBVCxDQUFrQkMsQ0FBbEIsRUFBcUI7QUFDcEI7QUFDRjtBQUNBO0FBQ0VBLEVBQUFBLENBQUMsQ0FBQ0MsUUFBRCxDQUFELENBQVlDLEVBQVosQ0FBZSxPQUFmLEVBQXdCLHFDQUF4QixFQUErREMsQ0FBQyxDQUFDQyxRQUFGLENBQVcsVUFBQ0MsS0FBRCxFQUFXO0FBQ25GLFFBQU1DLFVBQVUsR0FBR04sQ0FBQyxDQUFDSyxLQUFLLENBQUNFLGFBQVAsQ0FBcEI7QUFDQSxRQUFNQyxVQUFVLEdBQUdGLFVBQVUsQ0FBQ0csT0FBWCxDQUFtQixhQUFuQixDQUFuQjtBQUNBRCxJQUFBQSxVQUFVLENBQUNFLElBQVgsQ0FBZ0IsU0FBaEIsRUFBMkJDLE1BQTNCOztBQUNBLFFBQUlILFVBQVUsQ0FBQ0UsSUFBWCxDQUFnQixVQUFoQixFQUE0QkUsTUFBNUIsS0FBdUMsQ0FBM0MsRUFBOEM7QUFDNUNKLE1BQUFBLFVBQVUsQ0FBQ0ssTUFBWCxDQUFrQiwrQkFBbEI7QUFDRDs7QUFDREwsSUFBQUEsVUFBVSxDQUFDRSxJQUFYLENBQWdCLFVBQWhCLEVBQTRCSSxRQUE1QixDQUFxQyxXQUFyQztBQUVBQyxJQUFBQSxNQUFNLENBQUNDLElBQVAsQ0FDRUMsTUFBTSxDQUFDQyxPQURULEVBRUU7QUFDRUMsTUFBQUEsTUFBTSxFQUFFLGtCQURWO0FBRUVDLE1BQUFBLFVBQVUsRUFBRUgsTUFBTSxDQUFDSSxvQkFBUCxDQUE0QkQsVUFGMUM7QUFHRUUsTUFBQUEsSUFBSSxFQUFFaEIsVUFBVSxDQUFDaUIsR0FBWDtBQUhSLEtBRkYsRUFPRSxVQUFDQyxRQUFELEVBQWM7QUFDWmhCLE1BQUFBLFVBQVUsQ0FBQ0UsSUFBWCxDQUFnQixVQUFoQixFQUE0QmUsV0FBNUIsQ0FBd0MsV0FBeEM7QUFDQWpCLE1BQUFBLFVBQVUsQ0FBQ0UsSUFBWCxDQUFnQixTQUFoQixFQUEyQkMsTUFBM0I7O0FBRUEsVUFBSWEsUUFBUSxDQUFDRSxTQUFiLEVBQXdCO0FBQ3RCLFlBQU1DLE9BQU8sR0FBR1YsTUFBTSxDQUFDSSxvQkFBUCxDQUE0Qk8sb0JBQTVDO0FBQ0FwQixRQUFBQSxVQUFVLENBQUNLLE1BQVgsOEVBRU1jLE9BRk47QUFLRCxPQVBELE1BT087QUFDTCxZQUFNQSxRQUFPLEdBQUdWLE1BQU0sQ0FBQ0ksb0JBQVAsQ0FBNEJRLGtCQUE1QixDQUErQ0MsT0FBL0MsQ0FBdUQsU0FBdkQsRUFBa0VOLFFBQVEsQ0FBQ08sbUJBQTNFLENBQWhCOztBQUNBdkIsUUFBQUEsVUFBVSxDQUFDSyxNQUFYLDRFQUVNYyxRQUZOO0FBS0Q7QUFDRixLQTFCSCxFQTJCRSxNQTNCRjtBQTZCRCxHQXRDOEQsRUFzQzVELEdBdEM0RCxDQUEvRDtBQXdDQTtBQUNGO0FBQ0E7O0FBQ0UzQixFQUFBQSxDQUFDLENBQUNDLFFBQUQsQ0FBRCxDQUFZQyxFQUFaLENBQWUsT0FBZixFQUF3Qix3REFBeEIsRUFBa0YsVUFBQ0csS0FBRCxFQUFXO0FBQzNGQSxJQUFBQSxLQUFLLENBQUMyQixjQUFOO0FBQ0FoQyxJQUFBQSxDQUFDLENBQUNLLEtBQUssQ0FBQ0UsYUFBUCxDQUFELENBQXVCMEIsSUFBdkI7QUFDRCxHQUhEO0FBSUQsQ0FuREEsRUFtRENsQixNQW5ERCxDQUFEIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGpRdWVyeSwgXyAqL1xuXG4oZnVuY3Rpb24gcGFnZUxvYWQoJCkge1xuICAvKipcbiAgICogQ2hlY2tzIEdUSU4gZm9yIHVuaXF1ZW5lc3MgYW5kIGlzc3VlcyBhbiBlcnJvci9zdWNjZXNzIG1lc3NhZ2UuXG4gICAqL1xuICAkKGRvY3VtZW50KS5vbigna2V5dXAnLCBcImlucHV0W25hbWUqPSdfc2hvcC1zdGFuZGFyZHNfZ3RpbiddXCIsIF8uZGVib3VuY2UoKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgJGd0aW5JbnB1dCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XG4gICAgY29uc3QgJGd0aW5GaWVsZCA9ICRndGluSW5wdXQucGFyZW50cygnLmZvcm0tZmllbGQnKTtcbiAgICAkZ3RpbkZpZWxkLmZpbmQoJy5ub3RpY2UnKS5yZW1vdmUoKTtcbiAgICBpZiAoJGd0aW5GaWVsZC5maW5kKCcuc3Bpbm5lcicpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgJGd0aW5GaWVsZC5hcHBlbmQoJzxzcGFuIGNsYXNzPVwic3Bpbm5lclwiPjwvc3Bhbj4nKTtcbiAgICB9XG4gICAgJGd0aW5GaWVsZC5maW5kKCcuc3Bpbm5lcicpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcblxuICAgIGpRdWVyeS5wb3N0KFxuICAgICAgd2luZG93LmFqYXh1cmwsXG4gICAgICB7XG4gICAgICAgIGFjdGlvbjogJ2lzX2V4aXN0aW5nX2d0aW4nLFxuICAgICAgICBwcm9kdWN0X2lkOiB3aW5kb3cuc2hvcF9zdGFuZGFyZHNfYWRtaW4ucHJvZHVjdF9pZCxcbiAgICAgICAgZ3RpbjogJGd0aW5JbnB1dC52YWwoKSxcbiAgICAgIH0sXG4gICAgICAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgJGd0aW5GaWVsZC5maW5kKCcuc3Bpbm5lcicpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgJGd0aW5GaWVsZC5maW5kKCcubm90aWNlJykucmVtb3ZlKCk7XG5cbiAgICAgICAgaWYgKHJlc3BvbnNlLmlzX3VuaXF1ZSkge1xuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB3aW5kb3cuc2hvcF9zdGFuZGFyZHNfYWRtaW4uZ3Rpbl9zdWNjZXNzX21lc3NhZ2U7XG4gICAgICAgICAgJGd0aW5GaWVsZC5hcHBlbmQoYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGljZSBub3RpY2Utc3VjY2Vzc1wiPlxuICAgICAgICAgICAgICAke21lc3NhZ2V9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gd2luZG93LnNob3Bfc3RhbmRhcmRzX2FkbWluLmd0aW5fZXJyb3JfbWVzc2FnZS5yZXBsYWNlKCd7e3VybH19JywgcmVzcG9uc2UuZHVwbGljYXRlX2VkaXRfbGluayk7XG4gICAgICAgICAgJGd0aW5GaWVsZC5hcHBlbmQoYFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGljZSBub3RpY2UtZXJyb3JcIj5cbiAgICAgICAgICAgICAgJHttZXNzYWdlfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgYCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnanNvbicsXG4gICAgKTtcbiAgfSwgNTAwKSk7XG5cbiAgLyoqXG4gICAqIERpc2FibGUgc2Nyb2xsIG9uIG51bWJlciBpbnB1dCBmaWVsZCB0byBwcmV2ZW50IGFjY2lkZW50YWwgdmFsdWUgY2hhbmdlcy5cbiAgICovXG4gICQoZG9jdW1lbnQpLm9uKCd3aGVlbCcsICdpbnB1dFtuYW1lPVwiYWNmW2ZpZWxkX3JlY29tbWVuZGVkX293bl9icmFuZF9wcm9kdWN0XVwiXScsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5ibHVyKCk7XG4gIH0pO1xufShqUXVlcnkpKTtcbiJdLCJmaWxlIjoiYWRtaW4uanMifQ==